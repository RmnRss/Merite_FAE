""" Author : Rousseau Romain 
wr stands for water rockets
to stands for take-off
"""

import pandas as pd
import matplotlib.pyplot as mpl


class DataRecovery:
    def __init__(self, filename):
        self.filename = filename

        self.data_file = pd.read_csv(self.filename)

        # Storing data from the CSV file columns into lists
        self.raw_time = self.data_file.Temps.tolist()
        self.raw_alt = self.data_file.Altitude.tolist()

        # Calculating time interval
        self.dt = abs(self.raw_time[1]-self.raw_time[0])

        # Getting take-off index using the altitude list to find the take-off time 
        self.to_index = 0
        while self.raw_alt[self.to_index] < 1:
            self.to_index += 1
        self.to_time = self.raw_time[self.to_index-1]

        # Removing useless data before take-off
        del self.raw_time[:self.to_index-1]
        del self.raw_alt[:self.to_index-1]

        # Adjusting timing to take-off
        self.raw_time = [x-self.to_time for x in self.raw_time]

        # Displaying the plot on a new window
        mpl.figure(1)
        mpl.plot(self.raw_time, self.raw_alt)
        mpl.show()